<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>Poultry Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">
<%@ include file="nav.jsp" %>
<div class="container py-4">

<!--  <h2 class="mb-3">Poultry Transport Dashboard</h2>

  <div class="d-flex gap-2 mb-4">
    <a class="btn btn-success" href="${pageContext.request.contextPath}/entries">Trip Entries</a>
    <a class="btn btn-primary" href="${pageContext.request.contextPath}/trip-details">
      <i class="bi bi-pencil-square"></i> Update Trip Details
    </a>
  </div>-->

  <div class="row g-3 mb-4">
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Total Customers</div><div class="fs-4">${totalCustomers}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Total Drivers</div><div class="fs-4">${totalDrivers}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Vans in Service</div><div class="fs-4">${totalVans}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Trips This Month</div><div class="fs-4">${tripsThisMonth}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Entries This Month</div><div class="fs-4">${entriesThisMonth}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Amount Spent (Final Price)</div><div class="fs-4">₹ ${entriesAmount}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Amount Received</div><div class="fs-4">₹ ${amountReceived}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Fuel Expenses</div><div class="fs-4">₹ ${fuelCost}</div></div></div>
    <div class="col-md-2"><div class="card shadow-sm p-3"><div class="text-muted">Dead Chicks</div><div class="fs-4">${deadChicks}</div></div></div>
  </div>

  <div class="row g-3">
    <div class="col-md-12">
      <div class="card p-3 shadow-sm">
        <h6>Monthly Financial Overview</h6>
        <canvas id="financeChart"></canvas>
      </div>
    </div>
  </div>
</div>

<script>
  // Visualize actual amount spent and received for the month
  new Chart(document.getElementById('financeChart'), {
    type: 'bar',
    data: {
      labels: ['Amount Spent', 'Amount Received', 'Fuel Expenses'],
      datasets: [{
        label: 'This Month',
        data: [${entriesAmount}, ${amountReceived}, ${fuelCost}],
        backgroundColor: ['#dc3545', '#198754', '#0d6efd']
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } },
      scales: { y: { beginAtZero: true } }
    }
  });
</script>
</body>
</html>